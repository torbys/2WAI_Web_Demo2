<!DOCTYPE html>
<html>

<head>
	<meta charset="UTF-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />
	<title>2WAI Demo</title>
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
	<link rel="stylesheet" href="css/swiper.min.css">
	<link rel="stylesheet" href="css/index.css">


</head>

<body>

	<audio src="./soundEffect/submit.mp3" style="display: none;" id="submitPlayer"></audio>
	<audio src="./soundEffect/changeStyle.mp3" style="display: none;" id="changeItemVoice"></audio>
	<audio src="./soundEffect/pop.mp3" style="display: none;" id="popVoice"></audio>
	<audio src="./soundEffect/mouse_click1.mp3" style="display: none;" id="optionsVoice"></audio>
	<audio src="./soundEffect/record.mp3" style="display: none;" id="recordVoice"></audio>
	<audio src="./soundEffect/stop_record.mp3" style="display: none;" id="stopVoice"></audio>
	<audio src="./soundEffect/swiperScroll.mp3" style="display: none;" id="ScrollVoice"></audio>

	<div class="outer-container">
	
		<div class="inner-container">

			<!-- z左侧视频面板 -->
			<div class="panel-left ">
				<!-- col-lg-12 -->
				<div class="Error-Dialog">
					<div class="loader"></div>
					<div class="text">Connection in progress...</div>
				</div>

				<div class="Time-out">
					<img class="Tcancel" src="./icon/cancel.png" alt="">
					<div class="Outicon">
						<img src="./icon/linkicon.png" alt="">
					</div>
					<div class="text">Connection Timeout</div>
					<button>Refresh</button>
				</div>

				<div class="control-panel">
					<div class="option">
						<input id="use-stun" type="checkbox" checked />
						<label for="use-stun">Use STUN server</label>
					</div>
				</div>

				<div class="ZoomClick no-select">
					<div class="ZoomGroup">
						<img src="./icon/more.png" id="Zoom-out" alt="">
						<img src="./icon/line.png" id="Zoom-in" alt="">
					</div>
				</div>

				<div class="bottom-icon no-select">
					Zoom
					<div class="moveWrapper">
						<img src="./icon/move.png" alt="" id="zoomIcon" />
					</div>
				</div>

				<div class="demo no-select">
					2WAI
					<div class="tips">
						Demo
					</div>
				</div>

				<div id="FeatureArea">
					<div class="Featureitem" id="change_item">
						<img src="./icon/change.png" alt="" />
					</div>
					<div class="Featureitem" id="clothes_item">
						<img src="./icon/clothes.png" alt="" />
					</div>
				</div>



				<!-- 视频展示区 -->
				<div id="media">
					

					<div class="Hint">


						<svg width="359" height="346" viewBox="0 0 359 346" fill="none" xmlns="http://www.w3.org/2000/svg">
							<path d="M85.5322 169.5C82.5322 165 73.0322 150.5 84.0322 140.5C81.0724 138 67.4919 114.5 62.9919 107.5C58.4919 100.5 34.992 71.5004 20.492 55.0004C5.99197 38.5004 0.491974 27.5004 0.991974 13.0004C1.26462 5.09382 10.9973 0.526636 16.4609 1.00037C21.0171 1.39541 21.0816 5.99951 24.492 8.50045C31.992 14.0004 51.492 38.0004 64.492 49.5004C77.492 61.0004 87.992 71.5005 103.492 83.5005C96.992 77.0005 95.492 67.0004 107.492 62.0004C117.092 58.0004 134.519 63.6671 142.032 67.0005C143.699 64.8338 149.932 59.0004 159.532 59.0004C171.532 59.0004 196.532 70.0005 208.532 76.5005C216.032 77.0005 223.032 77.0005 245.032 80.5005C267.032 84.0005 273.532 95.5005 276.032 106C278.532 116.5 308.032 203 321.532 218.5C350.532 248 357.532 257.5 358.532 275.5C359.532 293.5 341.532 307 330.532 317C312.032 337 303.532 345 286.532 345.5C269.532 346 252.532 329 245.032 319C237.532 309 204.532 283.5 188.032 279C159.532 272 115.532 231 112.532 228.5C109.532 226 107.532 225 104.532 218.5C101.532 212 88.5322 174 85.5322 169.5Z" fill="url(#paint0_radial_1115_845)"/>
							<defs>
							<radialGradient id="paint0_radial_1115_845" cx="0" cy="0" r="1" gradientUnits="userSpaceOnUse" gradientTransform="translate(23.492 17.5004) rotate(48.5069) scale(491.299 513.333)">
							<stop stop-color="white"/>
							<stop offset="0.447917" stop-color="#F8F8F8" stop-opacity="0.7"/>
							<stop offset="1" stop-color="white" stop-opacity="0.3"/>
							</radialGradient>
							</defs>
						</svg>	

						<div class="loader3">
							<div class="box">
							  <div class="logo">
								
							  </div>
							</div>

							<div class="box"></div>
							<div class="box"></div>
						</div>
  

						<div class="Hint-message">
							Long press for two seconds to activate the zoom
						</div>
						

						<button id="hint-button">I got it</button>
					</div>

					<div id="video-mask">

						<div id="TTS-title" name="TTS-title">TTS Selection</div>
						<div class="btn_wrapper">
							<img src="./icon/bottom.png" alt="" />
						</div>


						<div class="TTS-item">
							<!-- 选择项在此处动态添加 -->
						</div>
					</div>


					<audio id="audio" autoplay="false"></audio>
					<video id="video" autoplay="true" playsinline="true" muted src="./video/base.mp4"></video>

					<div id="activeLineZoom" class="visualizer-container hidden1"></div>


					<!-- 背景更换区 -->
					<div class="bannerWrapper">
						<div class="swiper-container" id='swiper1'>
							<div class="swiper-wrapper">
								<div class="swiper-slide">
									<img src="./icon/0.png" alt="" />
								</div>
								<div class="swiper-slide">
									<img src="./icon/1.png" alt="" />
								</div>
								<div class="swiper-slide">
									<img src="./icon/2.png" alt="" />
								</div>
								<div class="swiper-slide">
									<img src="./icon/3.png" alt="" />
								</div>
								<div class="swiper-slide">
									<img src="./icon/4.png" alt="" />
								</div>
								<div class="swiper-slide">
									<img src="./icon/5.png" alt="" />
								</div>
								<div class="swiper-slide">
									<img src="./icon/6.png" alt="" />
								</div>
							</div>
						</div>
						<div class="swiper-button-prev swiper-button-white btn_1" id="prev1">
							<img src="./icon/preImg.png" alt="">
						</div>
						<div class="swiper-button-next swiper-button-white btn_1" id="next1">
							<img src="./icon/nexImg.png" alt="">
						</div>
					</div>


					<!-- 声音切换区  -->
					<div class="bannerWrapper">
						<div class="swiper-container" id='swiper2'>
							<div class="swiper-wrapper">
							</div>
						</div>
						<div class="swiper-button-prev swiper-button-white btn_2" id="prev2">
							<img src="./icon/preImg.png" alt="">
						</div>
						<div class="swiper-button-next swiper-button-white btn_2" id="next2">
							<img src="./icon/nexImg.png" alt="">
						</div>
					</div>


					<!-- 人物切换区  -->
					<div class="bannerWrapper">
						<div class="swiper-container" id='swiper3'>
							<div class="swiper-wrapper">
							</div>
						</div>
						<div class="swiper-button-prev swiper-button-white btn_3" id="prev3">
							<img src="./icon/preImg.png" alt="">
						</div>
						<div class="swiper-button-next swiper-button-white btn_3" id="next3">
							<img src="./icon/nexImg.png" alt="">
						</div>
					</div>


					<!-- 衣服更换区 -->
					<div class="bannerWrapper">
						<div class="swiper-container" id='swiper4'>
							<div class="swiper-wrapper">
								<div class="swiper-slide">
									<img src="./icon/choice1.jpg" alt="" />
								</div>
								<div class="swiper-slide">
									<img src="./icon/choice1.jpg" alt="" />
								</div>
								<div class="swiper-slide">
									<img src="./icon/choice1.jpg" alt="" />
								</div>
								<div class="swiper-slide">
									<img src="./icon/choice1.jpg" alt="" />
								</div>
								<div class="swiper-slide">
									<img src="./icon/choice1.jpg" alt="" />
								</div>
							</div>
						</div>
						<div class="swiper-button-prev swiper-button-white btn_4" id="prev4">
							<img src="./icon/preImg.png" alt="">
						</div>
						<div class="swiper-button-next swiper-button-white btn_4" id="next4">
							<img src="./icon/nexImg.png" alt="">
						</div>
					</div>

					<!-- 缩放后的聊天面板 -->
				<div class="panel-zoom">

					
					<div class="moblieZoom">
						<div class="ZoomGroup2">
							<img src="./icon/more.png" id="Zoom-out2" alt="">
							<img src="./icon/line.png" id="Zoom-in2" alt="">
						</div>
					</div>

					<!-- 输入区 -->
					<div class="zoom-bottom">
						
						<button id="speak-button" class="hidden1">Hold on and speak</button>
						
						<textarea class="form-control" id="message2"
							placeholder="Type your message here..."></textarea>

						<div id="image-container-zoom"
							style="margin-top: 0;margin-left: 10px;background-color: #fff;border-radius: 50%;width: 40px;height: 40px;">
							<img id="voice-image-zoom" class="voice_img" src="./icon/voice-zoom.png" alt="voice"/>
						</div>

					</div>
					
					<!-- 聊天区 -->
					<div class="zoom-left" id="chat-messages-zoom">
						
					</div>

					<!-- 功能区 -->
					<div class="zoom-right">
						<div class="option-item " data-name="avatar">
							<div class="img_container" id="avatar-name">
								<img src="./icon/Digital Human.png" alt="" />
							</div>
							<label for="avatar-name">Avatar</label>
						</div>

						<div class="option-item" data-name="tts">
							<div class="img_container" id="tts-selection_zoom">
								<img src="./icon/cude.png" alt="" />
							</div>

							<label for="tts-selection">TTS</label>
						</div>

						<div class="option-item" data-name="voice">
							<div class="img_container" id="avatar-voice">
								<img src="./icon/voiceLine.png" alt="" />
							</div>
							<label for="avatar-voice">Voice</label>
						</div>

						<div class="option-item" data-name="background">
							<div class="img_container" id="avatar-background">
								<img src="./icon/background.png" alt="" />
							</div>
							<label for="avatar-background">Background</label>
						</div>
					</div>

				</div>


				</div>

				


			</div>

			<!-- 右侧聊天面板 -->
			<div class="panel ">

				<div class="chat-container" id="chat-messages">
					<div class="welcome-message">
						<!-- <span>Welcome! You can click the <img src="./icon/voice.png" alt="" class="voice_img" /> icon
							below or enter text to talk to me</span> -->
					</div>
					<!-- 聊天消息将在这里动态添加 -->
				</div>

				<form class="form-inline" id="echo-form">

					<div id="image-container">
						<img id="voice-image" class="voice_img" src="./icon/voice.png" alt="voice"
							onclick="changeImage()" />
					</div>

					<div class="gap"></div>

					<textarea class="form-control" id="message" placeholder="Type your message here..."></textarea>

					<div id="recordGroup1" class="hidden">
						<div id="record_wrapper">
							<img id="recording" src="./icon/voice_dark.png" alt="microphone" />
						</div>
						<img id="recordLine" src="./icon/recordLine.png" alt="Line" />
						<div id="recordTime_base">0.00</div>
					</div>

					<div id="recordGroup2" class="hidden">
						<div id="stop_wrapper">
							<div id="stop_record"></div>
						</div>

						<div id="activeLinePC" class="visualizer-container"></div>
					
						<div id="recordTime">0.00</div>
					</div>

					<div class="audio-preview hidden">

						<audio id="audio-player"></audio>
						<div id="custom-player">
							<img src="./icon/play.png" alt="">
						</div>

						<p id="file-name"></p>

						<img id="activeLine2" src="./icon/vioce_active.gif" alt="动画演示">

						<div id="recordTime2">0.00</div>

						<button id="delete-audio">
							<img src="./icon/cancel2.png" alt="">
						</button>
					</div>

					<!-- 按钮包裹的提交 -->
					<button type="submit" class="btn btn-default">
						<img class="submit" src="./icon/base_submit.png" alt="submit" />
					</button>

					<div class="gap"></div> <!-- 间隔竖线 -->

					<div class="more" id="moreButton">
						<img id="more_img" src="./icon/more.png" alt="" />
					</div>

				</form>

				<!-- 隐藏式选择框 -->
				<div id="options-container">
					<div class="options-group">
						<div class="option-item " data-name="avatar">
							<div class="img_container" id="avatar-name">
								<img src="./icon/Digital Human.png" alt="" />
							</div>
							<label for="avatar-name">Avatar</label>
						</div>

						<div class="option-item" data-name="tts">
							<div class="img_container" id="tts-selection">
								<img src="./icon/cude.png" alt="" />
							</div>

							<label for="tts-selection">TTS</label>
						</div>

						<div class="option-item" data-name="voice">
							<div class="img_container" id="avatar-voice">
								<img src="./icon/voiceLine.png" alt="" />
							</div>
							<label for="avatar-voice">Voice</label>
						</div>

						<div class="option-item" data-name="background">
							<div class="img_container" id="avatar-background">
								<img src="./icon/background.png" alt="" />
							</div>
							<label for="avatar-background">Background</label>
						</div>

					</div>

					<!-- 拖拉调节条 -->
					<div class="option-line">
						<label for="chunk-size">Min Length</label>
						<div class="slider-with-input">
							<div class="slider-container">
								<input type="range" id="chunk-size" class="form-control" min="0" max="30" step="1"
									value="10" style="width: 1000px" ;>
								<div class="number-box-container" style="display: none;">
									<input type="number" id="chunk-size-input" class="form-control" min="0" max="30"
										value="10">
								</div>
							</div>
						</div>
					</div>

				</div>

			</div>
		</div>

	</div>




</body>

<!-- 配置和第三方库 -->
<script src="js/config.js"></script>
<script src="js/jquery-2.1.1.min.js"></script>
<script src="js/swiper.min.js"></script>

<!-- 集成共用功能 -->
<script src="js/audioVisualizer.js"></script>
<script src="js/client_wn.js"></script>

<!-- PC端的功能 -->
<script src="js/PCAreaUi.js"></script>
<script src="js/initSwiperTeam.js"></script>
<script src="js/Listeners.js"></script>
<script src="js/PCChat.js" ></script>
<script src="js/Options.js"></script>
<script src="js/darkMod.js"></script>
<script src="js/RecordPC.js"></script>

<!-- 移动端缩放区域 -->
<script src="js/ProgressBarLoading.js"></script>
<script src="js/ZoomAreaUI.js"></script>
<script src="js/MobileRecording.js"></script>
<script src="js/LongPresstoZoom.js"></script>


<!-- 弃置代码 -->
<script>
	

	// // 添加视频高度监听和聊天容器高度整功能
	// function adjustChatContainerHeight() {

	// console.log("检查高度")

	// 	const video = document.querySelector('#video');
	// 	const chatContainer = document.querySelector('.chat-container');
	// 	const form = document.querySelector('#echo-form'); // 确保你的表单有一个ID
	// 	const option =document.querySelector("#options-container");
	// 	var adjustedHeight ;

	// 	if (video && chatContainer && form) {

	// 	if (option.classList.contains("open")) {
	// 		const videoHeight = video.offsetHeight;
	// 		const formHeight = form.offsetHeight;
	// 		const optionHeight =  option.offsetHeight
	// 		adjustedHeight = videoHeight - formHeight - optionHeight;
	// 	} else {
	// 		const videoHeight = video.offsetHeight;
	// 		const formHeight = form.offsetHeight;
	// 		adjustedHeight = videoHeight - formHeight;
	// 	}

	// 	if (adjustedHeight > 0) {
	// 		chatContainer.style.height = `${adjustedHeight}px`;
	// 		chatContainer.style.minHeight = `${adjustedHeight}px`;
	// 		chatContainer.style.maxHeight = `${adjustedHeight}px`; // 你可以根据需要调整最大高度
	// 	} else {
	// 		// 如果计算出的高度小于或等于0，你可以设置一个最小高度或者直接使用视频的高度
	// 		chatContainer.style.height = `${videoHeight}px`;
	// 		chatContainer.style.minHeight = `${videoHeight}px`;
	// 		chatContainer.style.maxHeight = `${videoHeight}px`;
	// 	}

	// 	}
	// }

	// // 监听视频加载事件
	// document.querySelector('#video').addEventListener('loadedmetadata', () => {
	// setTimeout(adjustChatContainerHeight, 100); // 迟一点执行以确保视频尺寸已更新
	// });

	// // 创建 ResizeObserver 来监听视频尺寸变化
	// const resizeObserver = new ResizeObserver(entries => {
	// adjustChatContainerHeight();
	// });

	// // 开始观察视频元素
	// resizeObserver.observe(document.querySelector('#video'));

	// // 监听窗口大小变化
	// window.addEventListener('resize', adjustChatContainerHeight);

	// // 定期检查视频高度（以防其他情况导致的变化）
	// setInterval(adjustChatContainerHeight, 100);

</script>

</html>